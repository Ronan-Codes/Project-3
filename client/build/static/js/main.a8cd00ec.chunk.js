(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{106:function(e,a,t){e.exports=t(137)},111:function(e,a,t){},137:function(e,a,t){"use strict";t.r(a);var n,r,s,i,l=t(0),c=t.n(l),o=t(88),m=t.n(o),u=(t(111),t(36)),d=t(28),p=t(13),g=t(15),f=t(97),h=t(96),v=t(10),E=t(26),b=t.n(E),j=t(35),N=t(27),w=t(17),x=Object(w.a)(n||(n=Object(N.a)(["\nmutation addPhoto($photo: Upload!, $userId: String){\n    addPhoto(photo: $photo, userId: $userId)\n}\n"]))),O=Object(w.a)(r||(r=Object(N.a)(["\nmutation addProfilePhoto($photo: Upload!, $userId: String){\n    addProfilePhoto(photo: $photo, userId: $userId)\n}\n"]))),k=Object(w.a)(s||(s=Object(N.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),P=Object(w.a)(i||(i=Object(N.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username:$username, email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),y=t(89),S=t(90),C=t(65),I=t.n(C),_=new(function(){function e(){Object(y.a)(this,e)}return Object(S.a)(e,[{key:"getProfile",value:function(){return I()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return I()(e).exp<Date.now()/1e3}catch(a){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),$=function(e){var a=Object(g.useMutation)(k),t=Object(v.a)(a,2),n=t[0],r=(t[1].error,Object(l.useState)("")),s=Object(v.a)(r,2),i=s[0],o=s[1],m=Object(l.useState)(""),u=Object(v.a)(m,2),d=u[0],p=u[1],f=Object(l.useState)({email:"",password:""}),h=Object(v.a)(f,2),E=(h[0],h[1],function(){var e=Object(j.a)(b.a.mark((function e(a){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,n({variables:{email:d,password:i}});case 4:t=e.sent,r=t.data.login.token,_.login(r),window.location.assign("/dashboard"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:if(d&&i){e.next=16;break}return alert("Missing Email Address or Password"),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}());return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{class:"hero is-fullheight loginFormWrapper"},c.a.createElement("div",{class:"hero-body"},c.a.createElement("div",{class:"container"},c.a.createElement("div",{class:"columns is-centered"},c.a.createElement("div",{class:"column is-5-tablet is-4-desktop is-3-widescreen"},c.a.createElement("section",{class:"box"},c.a.createElement("div",{class:"loginForm"},c.a.createElement("div",{class:"field"},c.a.createElement("div",{class:"control has-icons-left"},c.a.createElement("input",{id:"loginEmail",type:"email",placeholder:"Email",class:"input",required:!0,value:d,onChange:function(e){return p(e.target.value)}}),c.a.createElement("span",{class:"icon is-small is-left"},c.a.createElement("i",{class:"fa fa-envelope"})))),c.a.createElement("div",{class:"field"},c.a.createElement("div",{class:"control has-icons-left"},c.a.createElement("input",{id:"loginPassword",type:"password",placeholder:"Password",class:"input",required:!0,value:i,onChange:function(e){return o(e.target.value)}}),c.a.createElement("span",{class:"icon is-small is-left"},c.a.createElement("i",{class:"fa fa-lock"})))),c.a.createElement("div",{class:"field has-text-centered"},c.a.createElement("button",{class:"button is-success",onClick:E},"Login"))),c.a.createElement("div",{class:"has-text-centered"},c.a.createElement("a",{onClick:function(){e.changeSignup(!0)}},"Signup?")))))))))},F=function(e){var a=Object(l.useState)(""),t=Object(v.a)(a,2),n=t[0],r=t[1],s=Object(l.useState)(""),i=Object(v.a)(s,2),o=i[0],m=i[1],u=Object(l.useState)(""),d=Object(v.a)(u,2),p=d[0],f=d[1],h=Object(g.useMutation)(P),E=Object(v.a)(h,1)[0],N=function(){var e=Object(j.a)(b.a.mark((function e(a){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,E({variables:{username:n,email:p,password:o}});case 3:if(t=e.sent,r=t.data.addUser.token,_.login(r),window.location.assign("/dashboard"),p&&o&&n){e.next=10;break}return alert("Missing Email Address or Username or Password"),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{class:"hero is-fullheight loginFormWrapper"},c.a.createElement("div",{class:"hero-body"},c.a.createElement("div",{class:"container"},c.a.createElement("div",{class:"columns is-centered"},c.a.createElement("div",{class:"column is-5-tablet is-4-desktop is-3-widescreen"},c.a.createElement("section",{class:"box"},c.a.createElement("div",{class:"signupForm"},c.a.createElement("div",{class:"field"},c.a.createElement("div",{class:"control has-icons-left"},c.a.createElement("input",{id:"signupUserName",type:"text",placeholder:"Username",class:"input",required:!0,value:n,onChange:function(e){return r(e.target.value)}}),c.a.createElement("span",{class:"icon is-small is-left"},c.a.createElement("i",{class:"fa fa-user"})))),c.a.createElement("div",{class:"field"},c.a.createElement("div",{class:"control has-icons-left"},c.a.createElement("input",{id:"signupEmail",type:"email",placeholder:"Email",class:"input",required:!0,value:p,onChange:function(e){return f(e.target.value)}}),c.a.createElement("span",{class:"icon is-small is-left"},c.a.createElement("i",{class:"fa fa-envelope"})))),c.a.createElement("div",{class:"field"},c.a.createElement("div",{class:"control has-icons-left"},c.a.createElement("input",{id:"signupPassword",type:"password",placeholder:"Password",class:"input",required:!0,value:o,onChange:function(e){return m(e.target.value)}}),c.a.createElement("span",{class:"icon is-small is-left"},c.a.createElement("i",{class:"fa fa-lock"})))),c.a.createElement("div",{class:"field has-text-centered"},c.a.createElement("button",{class:"button is-success",onClick:N},"Sign up"))),c.a.createElement("div",{class:"has-text-centered"},c.a.createElement("a",{onClick:function(){e.changeSignup(!1)}},"Login")))))))))},L=function(){var e=Object(l.useState)(!1),a=Object(v.a)(e,2),t=a[0],n=a[1],r=function(e){n(e)};return c.a.createElement(c.a.Fragment,null,t?"":c.a.createElement($,{changeSignup:r}),t?c.a.createElement(F,{changeSignup:r}):"")};var U=function(e){var a=e.children;return c.a.createElement("div",{style:{height:560,clear:"both",paddingTop:120,textAlign:"center"}},a)},z=function(){return c.a.createElement("div",null,c.a.createElement(U,null,c.a.createElement("h1",null,"404 Page Not Found")))},A=t(51);var W=function(e){var a=Object(l.useState)({email:"",password:""}),t=Object(v.a)(a,2),n=t[0],r=t[1],s=Object(g.useMutation)(P),i=Object(v.a)(s,1)[0],o=function(){var e=Object(j.a)(b.a.mark((function e(a){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,i({variables:{email:n.email,password:n.password,firstName:n.firstName,lastName:n.lastName}});case 3:t=e.sent,r=t.data.addUser.token,_.login(r);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),m=function(e){var a=e.target,t=a.name,s=a.value;r(Object(u.a)(Object(u.a)({},n),{},Object(A.a)({},t,s)))};return c.a.createElement("div",{className:"container my-1"},c.a.createElement(d.b,{to:"/login"},"\u2190 Go to Login"),c.a.createElement("h2",null,"Signup"),c.a.createElement("form",{onSubmit:o},c.a.createElement("div",{className:"flex-row space-between my-2"},c.a.createElement("label",{htmlFor:"firstName"},"First Name:"),c.a.createElement("input",{placeholder:"First",name:"firstName",type:"firstName",id:"firstName",onChange:m})),c.a.createElement("div",{className:"flex-row space-between my-2"},c.a.createElement("label",{htmlFor:"lastName"},"Last Name:"),c.a.createElement("input",{placeholder:"Last",name:"lastName",type:"lastName",id:"lastName",onChange:m})),c.a.createElement("div",{className:"flex-row space-between my-2"},c.a.createElement("label",{htmlFor:"email"},"Email:"),c.a.createElement("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:m})),c.a.createElement("div",{className:"flex-row space-between my-2"},c.a.createElement("label",{htmlFor:"pwd"},"Password:"),c.a.createElement("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:m})),c.a.createElement("div",{className:"flex-row flex-end"},c.a.createElement("button",{type:"submit"},"Submit"))))};document.addEventListener("DOMContentLoaded",(function(){var e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(){var a=e.dataset.target,t=document.getElementById(a);e.classList.toggle("is-active"),t.classList.toggle("is-active")}))}))}));var D=function(){var e=_.loggedIn();return c.a.createElement("nav",{className:"navbar mainNav",role:"navigation","aria-label":"main navigation"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement("div",{className:"navbar-item"},c.a.createElement("h1",{className:"title appName has-text-light"},"Pic'd Up")),c.a.createElement("a",{role:"button",className:"navbar-burger ","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}))),c.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu mainNav"},c.a.createElement("div",{className:"navbar-start"}),c.a.createElement("div",{className:"navbar-end"},c.a.createElement("div",{className:"navbar-item "},c.a.createElement("div",{className:"buttons"},e?c.a.createElement(d.b,{className:"button clearColor",to:"/dashboard"},c.a.createElement("i",{className:"fas fa-home is-size-3 has-text-light"})):c.a.createElement(d.b,{className:"button clearColor",to:"/"},c.a.createElement("i",{className:"fas fa-home is-size-3 has-text-light"})),e?c.a.createElement(d.b,{className:"button clearColor",to:"/profile"},c.a.createElement("i",{className:"fas fa-user-circle is-size-3 has-text-light"})):"",e?c.a.createElement("a",{className:"button clearColor",onClick:function(e){e.preventDefault(),_.logout()}},c.a.createElement("i",{className:"fas fa-sign-in-alt is-size-3 has-text-light"})):"")))))},q=t(55);var M,T,B,G=function(){var e=Object(g.useMutation)(x),a=Object(v.a)(e,1)[0],t=_.getProfile();console.log(t.data._id);var n=Object(l.useCallback)((function(e){var n=Object(v.a)(e,1)[0];console.log(n),a({variables:{photo:n,userId:t.data._id}})}),[a]),r=Object(q.a)({onDrop:n}),s=r.getRootProps,i=r.getInputProps,o=r.isDragActive;return c.a.createElement("div",s(),c.a.createElement("input",i()),o?c.a.createElement("p",null,"Drop Here..."):c.a.createElement("p",null,"Upload Photos"))},R=(Object(w.a)(M||(M=Object(N.a)(["\n    {\n        photos {\n            _id\n            photoName\n            mimetype\n            encoding\n        }\n    }\n"]))),Object(w.a)(T||(T=Object(N.a)(["\nquery userPhotos($userId: ID!){\n    userPhotos(userId: $userId){\n        _id\n        username\n        email\n        profilePhoto{\n            _id\n        }\n        photos{\n            _id\n        }\n    }\n}\n"])))),J=Object(w.a)(B||(B=Object(N.a)(["\n    {\n        users{\n            _id\n            username\n            profilePhoto{\n                _id\n            }\n            photos{\n                _id\n            }\n        }\n    }\n"]))),Q=t(149),H=t(148);t(126),t(127),t(128);Q.a.use([H.a]);var K=function(e){var a=e&&e.data&&e.data.genres?e.data.genres.join(" | "):"";e&&e.data&&e.data.name&&e.data.name;return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"columns column is-four-fifths is-multiline mt-5"},c.a.createElement("div",{className:"column dropShadow whiteBg"},c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column is-one-quarter searchedUserPicCont"},c.a.createElement("div",{className:""},c.a.createElement("div",{className:"imageContainer"},e.data.profilePhoto?c.a.createElement("img",{src:"/photo/".concat(e.data.profilePhoto._id),className:"profilePic p-3 portfolioImg",alt:"Profile picture"}):c.a.createElement("img",{src:"/images/Profiles/user.png",className:"profilePic p-3 portfolioImg",alt:"Profile picture"})),c.a.createElement("h2",{className:"has-text-centered is-size-4"},e.data.username),c.a.createElement("h3",{className:"has-text-centered has-text-grey searchedUserGenre"},a))),c.a.createElement("div",{className:"column is-three-quarters scrolling-wrapper is-vcentered"},c.a.createElement("div",{className:"columns is-full is-vcentered"},e.data.photos&&e.data.photos.length>0?e.data.photos.map((function(e,a){return c.a.createElement("div",{key:a,className:"is-one-third column mr-3 image"},c.a.createElement("img",{src:"/photo/".concat(e._id)}))})):""))))))},V=function(e){var a=Object(g.useQuery)(J),t=a.loading,n=a.data;return t?c.a.createElement("p",null,"Loading..."):(console.log(n),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"columns is-centered is-gapless mt-5 is-multiline"},n.users.map((function(e,a){return c.a.createElement(K,{key:a,data:e})})))))};var X=function(){var e=Object(g.useMutation)(O),a=Object(v.a)(e,1)[0],t=_.getProfile();console.log(t.data._id);var n=Object(l.useCallback)((function(e){var n=Object(v.a)(e,1)[0];console.log(n),a({variables:{photo:n,userId:t.data._id}})}),[a]),r=Object(q.a)({onDrop:n}),s=r.getRootProps,i=r.getInputProps;return r.isDragActive,c.a.createElement("div",s(),c.a.createElement("input",i()),c.a.createElement("i",{className:"far fa-id-badge has-text-black"}))},Y=function(e){var a=_.getProfile();console.log(a.data._id);var t,n,r,s,i=Object(g.useQuery)(R,{variables:{userId:a.data._id}}),o=i.loading,m=i.data;o||(console.log(m.userPhotos.photos),t=m.userPhotos.photos,n=m.userPhotos.email,r=m.userPhotos.username,s=m.userPhotos.profilePhoto);var u=Object(l.useState)(""),d=Object(v.a)(u,2),p=d[0],f=d[1],h=Object(l.useState)([]),E=Object(v.a)(h,2),b=(E[0],E[1]),j=Object(l.useState)({name:"John Doe",profilePic:"/images/Profiles/LeesAdventures.jpg",email:"",isFavorite:!1,description:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Dignissimos ullam, in maxime voluptatum iste nemo laboriosam facere voluptas modi id velnulla mollitia libero, amet numquam, tempore architecto nostrum et.",genres:["Portrait","Weddings","Street","Travel"],collection:[{type:"Portrait",images:["/images/portrait/pexels-ali-pazani-3196587.jpg","/images/portrait/pexels-ali-pazani-3196587.jpg","/images/portrait/pexels-ali-pazani-3196587.jpg","/images/portrait/pexels-ali-pazani-3196587.jpg","/images/portrait/pexels-ali-pazani-3196587.jpg","/images/portrait/pexels-ali-pazani-3196587.jpg"]},{type:"Weddings",images:["/images/portrait/pexels-bruno-salvadori-2269872.jpg","/images/portrait/pexels-bruno-salvadori-2269872.jpg","/images/portrait/pexels-bruno-salvadori-2269872.jpg","/images/portrait/pexels-bruno-salvadori-2269872.jpg","/images/portrait/pexels-bruno-salvadori-2269872.jpg","/images/portrait/pexels-bruno-salvadori-2269872.jpg"]},{type:"Street",images:["/images/portrait/pexels-cheda-stankovic-3395708.jpg","/images/portrait/pexels-cheda-stankovic-3395708.jpg","/images/portrait/pexels-cheda-stankovic-3395708.jpg","/images/portrait/pexels-cheda-stankovic-3395708.jpg","/images/portrait/pexels-cheda-stankovic-3395708.jpg","/images/portrait/pexels-cheda-stankovic-3395708.jpg"]},{type:"Travel",images:["/images/portrait/GinaPix.jpg","/images/portrait/GinaPix.jpg","/images/portrait/GinaPix.jpg","/images/portrait/GinaPix.jpg","/images/portrait/GinaPix.jpg","/images/portrait/GinaPix.jpg"]}]}),N=Object(v.a)(j,2),w=N[0];N[1];return c.a.createElement(c.a.Fragment,null,o?c.a.createElement("div",null,"Some Loading Icon etc"):c.a.createElement(c.a.Fragment,null,c.a.createElement("header",{className:"columns is-centered is-gapless "},c.a.createElement("div",{className:"column is-one-fifth ml-5"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{class:"imageContainer"},s?c.a.createElement("img",{src:"/photo/".concat(s._id),className:"profilePic p-3 portfolioImg",alt:"Profile picture"}):c.a.createElement("img",{src:"/images/Profiles/user.png",className:"profilePic p-3 portfolioImg",alt:"Profile picture"})),c.a.createElement("footer",{className:"card-footer is-size-4"},c.a.createElement("a",{href:"mailto:".concat(n),className:"card-footer-item"},c.a.createElement("i",{className:"fas fa-envelope has-text-black"})),w.isFavorite?c.a.createElement("a",{href:"#",className:"card-footer-item"},c.a.createElement("i",{className:"fas fa-heart has-text-danger"})):c.a.createElement("a",{href:"#",className:"card-footer-item"},c.a.createElement("i",{className:"far fa-heart has-text-danger"})),c.a.createElement("a",{href:"#",className:"card-footer-item"},c.a.createElement(X,null,c.a.createElement("i",{className:"fas fa-share-square has-text-black"})))))),c.a.createElement("div",{className:"column columns is-centered is-three-fifths"},c.a.createElement("div",{className:"column columns is-four-fifths"},c.a.createElement("div",{className:"column is-full is-size-4 has-text-centered mt-5"},c.a.createElement("div",{className:"aboutMeWrapper"},c.a.createElement("h2",{id:"nameContainer",className:"is-size-3"},r),c.a.createElement("span",{id:"aboutMeContainer"},w.description)),c.a.createElement("div",{className:"manageBtnWrapper"},c.a.createElement("button",{className:"button has-text-light manageBtn"},c.a.createElement(G,null))))))),c.a.createElement("section",{className:"columns is-centered"},c.a.createElement("div",{className:"column is-four-fifths"},c.a.createElement("div",{className:"tabs is-centered mt-5"},c.a.createElement("ul",null,w.genres.map((function(e,a){return c.a.createElement("li",{key:a,className:"is-pointer ".concat(p===e?"active":""),onClick:function(){return function(e){f(e);var a=w.collection.find((function(a){return a.type===e}));b(a.images)}(e)}},e)})))))),c.a.createElement("main",{className:"columns is-centered"},c.a.createElement("div",{className:"column columns is-four-fifths is-multiline"},t&&t.length>0?t.map((function(e,a){return c.a.createElement("div",{key:a,className:"column is-one-third-desktop is-half-tablet imageWrapper"},c.a.createElement("div",{class:"imageContainer"},c.a.createElement("img",{className:"portfolioImg",src:"/photo/".concat(e._id),alt:""})))})):""))))},Z=Object(h.a)({uri:"/graphql"}),ee=Object(f.a)((function(e,a){var t=a.headers,n=localStorage.getItem("id_token");return{headers:Object(u.a)(Object(u.a)({},t),{},{authorization:n?"Bearer ".concat(n):""})}})),ae=new g.ApolloClient({link:ee.concat(Z),cache:new g.InMemoryCache});var te=function(){return c.a.createElement(g.ApolloProvider,{client:ae},c.a.createElement(d.a,null,c.a.createElement("div",null,c.a.createElement(D,null),c.a.createElement(p.c,null,c.a.createElement(p.a,{exact:!0,path:"/",component:L}),c.a.createElement(p.a,{exact:!0,path:"/dashboard",component:V}),c.a.createElement(p.a,{exact:!0,path:"/profile",component:Y}),c.a.createElement(p.a,{exact:!0,path:"/signup",component:W}),c.a.createElement(p.a,{exact:!0,path:"/add",component:G}),c.a.createElement(p.a,{component:z})))))},ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}m.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(te,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");ne?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):re(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):re(a,e)}))}}()}},[[106,1,2]]]);
//# sourceMappingURL=main.a8cd00ec.chunk.js.map